---
layout: post
title: "Day 9809"
date: "2019-04-28 10:15:59 +0530"
tags:
  - daily
---

I was not able to write my daily learning Yesterday because it was Sunday and I
was roaming around with my friend till late night. I was managed to do a few
things Yesterday.

### Puneeth

Half of my Yesterday, I assinged to a personal work. Rest of the day I did below
things.

[Puneeth][puneeth] agreet to meet me on my personal request.  Puneeth is an
active Python community member.

#### Blog

He is blogging since 2004. When I asked him about the time he is investing in
writing, he replied that he follows a tight schedule for his writing. He and his
5 friends meets one day in a week over the video call.  During this call they
write new things, seek reviews from each other. If the post is done during that
time, then it will be published otherwise it will be continued in next weeks.
From his this advise, I learnt that following dedicated schedule helps in
sustaining the momentum of writing.

When I asked about any tools he uses for linting correcting grammar, he
surprizingly said he do not use any. Earlier he mentioned that English is not
his first language. I myself can't write without taking help of any English
grammar linting tools.

Puneeth said he seeks reviews in 2 bathches when I asked about requesting people
to proofread your blog post. First proofreading is done when blog post is 30%
complete. In this stage of the blog post, a reviews are requested for making
comments on the flow of the blog post. Mostly this stage answers question that
is it worth to continue working on this blog post or not. Second stage review is
done when the blog post is 100% completed. In this stage the post is reviewed
for grammer check, re-structuring the sentense, visuals etc. I have only
requested people to review my blog post when it is 100% completed.  This
indicates that all of the review I receive are agaist my grammar mistakes or
problem with flow of the post. There are no reviews for structure or value of
the content reviews. I should follow his this method while writing my posts.

He said you should read anything from the writers perspective. If you like any
blog post, then you should know why you like it. If you don't then too you
should identify why you don't like it. He takes inspiration from a blog post he
read earlier.

While writing one should have a clear focus on target audience he added. We
can't write a generalized blog post. Success ratio of your blog post is, if the
target audience of your blog post like it then your efforts for the post is
worth, if they don't then you lost your game. Target audience can be one person
or more than one person.

Recently I started writing a daily blog post like this one. I told me I like it
because it is helping me to take notes of the day. I am able to go back and
learn from my own writing. On that point, he said he has stopped writing daily
blog post because he thinks it is timeconsuming. When one is doing a full-time
job then it will be difficult for him/her to afford such time for his daily
writing. He added that daily blog post is just a dump of your mind. You can't
make it focued on anything. Your reader has to go from many unwanted things via
your such blog posts.


#### RC

I was rejected by the Recurse Center last year. It was my first time applying at
Recurse center. Puneeth is a member of Recurse Center community. He has attended
RC during the early stage of it. Since few years, Recurse Center has stopped
giving their remarks on application. Which means, you will just receive an
rejection mail with a few guidlines on re-apply that it. No single word on what
you did wrong with your application. I requested Puneeth to review my
application, but because of internet issues I failed to demonstrate my
application to him. He promissed to take a look to it later and share his
feedback on it.

I asked him, "Why one should attend RC? How was his experience?". He said his
experience was pretty good. Real advantage of RC is its community. RC is a large
community of diverse people. You will be life part of that community life long.
He said rejection of the RC application is too common. The main check is a right
fit for their culture. If you or your ideas are not fitting into their boundries
then they will not accept it. I requested him to review my application if I
apply to RC in future.


## Rest of the day

I decided to spent rest of my time on [expect][expect] testing script. This
[expect][expect]. I wrote [this][maximum_in_struct_array_testcase] end to end
test case for testing [Maximum in Struct Array][maximum_in_struct_array_program]
program. When I run this expect test case, It invokes the python program and
stops at breakpoint and give Python debugger to me. This behaviour helps me to
debug ongoing program. Whereas my [this][count_nodes_of_linkedlist_testcase] for
[Count nodes of Linkedlist][count_nodes_of_linkedlist] program, even if the
program has a breakpoint the expect script don't give breakpoint. I was totally
confused for this behaviour of expect. I tried reading manual pages of expect
twice, thrice for getting an hint about this behaviour. I was not able to get
any clue. I asked at #tcl for guiding me on this behaviour of expect. I didn't
got any response. May be this happen because it happen on weekend. Now the only
option was to debug this on my own. I invoked the [expect][expect] prompt, by
typing `expect` to my command prompt. I wrote expect commands to spawn "Count
nodes of linkedlist test case" one by one. And guess what? It paused the
execution of the command at breakpoint. This was something satisfactory thing. I
tried hard to find the difference between the expect script I wrote and the
command I fired at the interpreter. Even after spending more than one hour, I
was clueless. This experience was enough to look for any other options.

At #tcl IRC channel, `aspect` user suggested to test my program using below
command

#### Shell comparison

```shell python myprogram.py < input.txt > output.txt  &&  diff output.txt
expected.txt ```

Here, the `input.txt` file is the collection of arguments which will be given to
my program via redirection operator of bash. Whatever output my program will
give will be added to file `output.txt`. The second command `diff` will run
after the program has executed. The `diff` command will compare the generated
`output.txt` file with the `expected.txt` file. The `expected.txt` file is the
file where expected answers are already listed.

This approach has many flows. First and most fundamental problem is readability.
The argument of `input.txt` will not be readable. It will be just numbers for
any other. One has to look at the source code of the program to understand them.
This problem is huge and can bug even the writer of the same program. I had a
poor experience when I try to update the code which is written by me few years
back. Another problem is with `diff` command. If the output of the program do
not match with the expected output then the diff will be displayed, but it will
exit with number `0`. Which means, there will be no way to identify that test
case passed or failed in CI. Everything will pass even if it is actually
failing. This was clearly not an expected solution.

Third issue is files! The execution environment will not be sandbox. Which
means, the output files will be generated and say wherever the test will run. I
have to find any configuration or shell script to clean the output files.
Writing bash scripts is even poor than writing a Javascript for Internet
Explorer browser. I decided to dump this idea.


#### Python library called exactly

[Exactly][exactly] is a utility to test command line programs. Knowledge of
Python is not required to write tests which is a good point. Quick glams at the
Github page of the library attracted me to try it out. I wrote a simple end to
end test for dummy program which was taking two numbers from the user and
display the sum of them.

The structure of the test case was not following any standard structure. I
myself has never seen structure like what [Exactly][exactly] is accepting. I
wrote [this][exactly_testcase] test case for my simple sum program. I am
instructing to feed "1" and "2" to my sum program and assert that it returns
"3".

The advantage for using this utility is that it sandbox the environment for
test. Which means, if my script creates any file or environment variable then it
will not give any effect at my operating system. Everything will be removed when
my execution will end. It is Python based, so I don't have to add yet another
dependency for installing this utility.

I tried various ways to make those input values readable. I tried the
environment variable way. The documentation of the tool describes a way to
create an environment variable, but it does not describe any way to use them in
your code and especially at `STDIN`.

For the shake of my confirmation, I put unhandled exception at my program. When
I run the test it failed, but it didn't gave me the trace back. There was no way
to find what was going wrong.

The issue of readability was still unsolved. The issue of identifying what was
going wrong was still unsolved.

No test runner utility which executes bunch of tests. At least it didn't coat my
attention while skimming the documentation.

I decided to look for any other options and skip this utility to use.


#### Aruba with Cucumber


Cucumber is well-known utility to write [Gherkin][gherkin] based functional
tests. Gherkin is constructed, read and maintained like a user story. Aruba is a
ruby based library for writing cucumber tests for command line utilities.
Skimming at documentation said, you don't need any knowledge of Ruby to write
tests for simple application. Although it will required for testing something
complex. I don't think I will need any complex testing structure for testing
this solutions. They are too simple at user level. I decided to install Ruby
version of Cucumber and installed `Aruba` to it.

Please find the functional test for the same sum program [here][aruba_testcase].
It looks neat and readability is little less, but can be improved by using
variables or adding extra notes to each "And I type" statements. I manually
added an unhandled exception at the source code of the program I was testing.
And while running test it gave me a whole trace back. This was a good
indication. The cucumber has great utility for running tests. This utility will
execute tests one by one. This was also solving my problem of executing tests
for all the programs.

I decided to use this utility for writing tests to my existing programs. Next
day, I will plan to convert not all the code. I will experiment this testing
approach at few programs. If it was constantly proving its abilities then I will
make a plan to convert test cases of all the test cases I have written.


This was enough for the Sunday. Rest of my time I spent roaming around, eating
food with my friend.



[maximum_in_struct_array_testcase]: https://github.com/ultimatecoder/geeksforgeek/blob/master-solution-for-count-nodes-of-linked-list/end_to_end_tests/arrays/maximum_in_struct_array.expect
[maximum_in_struct_array]: https://github.com/ultimatecoder/geeksforgeek/blob/master-solution-for-count-nodes-of-linked-list/programs/arrays/maximum_in_struct_array.py
[]: https://github.com/ultimatecoder/geeksforgeek/blob/master-solution-for-count-nodes-of-linked-list/programs/linkedlist/count_nodes_of_linked_list.py
[puneeth]: https://twitter.com/punchagan
[exactly]: https://pypi.org/project/exactly/
[gherkin]: https://github.com/cucumber/cucumber/wiki/Gherkin
[aruba_testcase]: https://gist.github.com/ultimatecoder/e684b336fb8bee4ffd082bdf69c7f2b5
